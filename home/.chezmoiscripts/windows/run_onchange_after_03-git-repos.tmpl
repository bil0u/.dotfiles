<#
.Synopsis
  Setup git repositories
.DESCRIPTION
  Text here
#>

{{ template "darwin/utils.ps1" . }}

filename "git-repos"

# Switching dotfiles repository to ssh
$dotfiles_remote_url = $(chezmoi git -- config --get remote.origin.url)

if ( ${dotfiles_remote_url:0:4} != "git@") {
	Action ".dotfiles → Switching remote URL to SSH"
	# $dotfiles_remote_url = $(echo $dotfiles_remote_url | sed 's/https:\/\//git@/' | sed 's/\//:/')
	chezmoi git -- remote set-url origin $dotfiles_remote_url
} else {
	Ignored ".dotfiles → Remote URL already switched to SSH"
}
